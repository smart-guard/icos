<UserControl x:Class="iCos5BACnetScheduleRT.View.Control.CalendarEntry"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:converter="clr-namespace:iCos5BACnetScheduleRT.View.Converter"
             mc:Ignorable="d"
             d:DesignHeight="200" d:DesignWidth="300">
  
  <!-- Resources -->
  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="../../Assets/ControlResources.xaml"/>
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="50"/>
      <RowDefinition Height="1*"/>
    </Grid.RowDefinitions>

    <!-- Calendar Type Selection -->
    <Border Grid.Row="0"
            BorderThickness="0 0 0 1"
            BorderBrush="LightGray">
      <Grid Grid.Row="0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0"
                Margin="10 5 0 5"
                Style="{StaticResource BorderHeader}">
          <TextBlock Text="날짜입력형식"
                     Style="{StaticResource TextBlockHeader}"/>
        </Border>
        <ComboBox x:Name="CmbEntryType" 
                  Grid.Column="1"
                  mah:ControlsHelper.CornerRadius="0 5 5 0"
                  mah:ControlsHelper.FocusBorderBrush="{StaticResource MahApps.Brushes.Accent}"
                  HorizontalContentAlignment="Left"
                  BorderBrush="{StaticResource ColorBorder}"
                  SelectedIndex="{Binding EntryType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={converter:CalendarEntryTypeToInt}}"
                  FontSize="14"
                  Margin="0 5 10 5">
          <ComboBoxItem Content="지정일"/>
          <ComboBoxItem Content="날짜범위"/>
          <ComboBoxItem Content="주일"/>
        </ComboBox>
      </Grid>
    </Border>

    <!-- Date Type Panel -->
    <Grid Grid.Row="1"
          Visibility="{Binding SelectedIndex, ElementName=CmbEntryType, Converter={converter:CalendarEntryDateVisibility}}">
      <Grid.RowDefinitions>
        <RowDefinition Height="1*"/>
        <RowDefinition Height="1*"/>
        <RowDefinition Height="1*"/>
      </Grid.RowDefinitions>
      <Grid Grid.Row="0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0"
                Margin="10 5 0 0"
                Style="{StaticResource BorderHeader}">
          <TextBlock Text="{Binding SelectedIndex, ElementName=CmbEntryType, Converter={converter:CalendarEntryDateRangeString}}"
                     Style="{StaticResource TextBlockHeader}"/>
        </Border>
        <DatePicker x:Name="StartDatePicker" 
                    Grid.Column="1"
                    mah:ControlsHelper.CornerRadius="0 5 5 0"
                    mah:ControlsHelper.FocusBorderBrush="{StaticResource MahApps.Brushes.Accent}"
                    mah:TextBoxHelper.Watermark="시작 날짜"
                    SelectedDate="{Binding StartDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    VerticalContentAlignment="Center"
                    BorderBrush="{StaticResource ColorBorder}"
                    FontSize="14"
                    Margin="0 5 10 0">
          <DatePicker.DisplayDateEnd>
            <MultiBinding Converter="{converter:CalendarEntryDateRangeLimit}">
              <Binding Path="SelectedDate" ElementName="StopDatePicker"/>
              <Binding Path="SelectedIndex" ElementName="CmbEntryType"/>
            </MultiBinding>
          </DatePicker.DisplayDateEnd>
        </DatePicker>
      </Grid>
      <Grid Grid.Row="1"
            Visibility="{Binding SelectedIndex, ElementName=CmbEntryType, Converter={converter:CalendarEntryDateRangeVisibility}}">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0"
                Margin="10 5 0 0"
                Style="{StaticResource BorderHeader}">
          <TextBlock Text="종료일"
                     Style="{StaticResource TextBlockHeader}"/>
        </Border>
        <DatePicker x:Name="StopDatePicker" 
                    Grid.Column="1"
                    mah:ControlsHelper.CornerRadius="0 5 5 0"
                    mah:ControlsHelper.FocusBorderBrush="{StaticResource MahApps.Brushes.Accent}"
                    mah:TextBoxHelper.Watermark="종료 날짜"
                    SelectedDate="{Binding StopDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    DisplayDateStart="{Binding SelectedDate, ElementName=StartDatePicker}"
                    VerticalContentAlignment="Center"
                    BorderBrush="{StaticResource ColorBorder}"
                    FontSize="14"
                    Margin="0 5 10 0"/>
      </Grid>
    </Grid>

    <!-- WeekNday Type Panel -->
    <Grid Grid.Row="1"
          Visibility="{Binding SelectedIndex, ElementName=CmbEntryType, Converter={converter:CalendarEntryDateNVisibility}}">
      <Grid.RowDefinitions>
        <RowDefinition Height="1*"/>
        <RowDefinition Height="1*"/>
        <RowDefinition Height="1*"/>
      </Grid.RowDefinitions>
      <Grid Grid.Row="0">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0"
                Margin="10 5 0 0"
                Style="{StaticResource BorderHeader}">
          <TextBlock Text="지정월"
                     Style="{StaticResource TextBlockHeader}"/>
        </Border>
        <ComboBox Grid.Column="1"
                  mah:ControlsHelper.CornerRadius="0 5 5 0"
                  mah:ControlsHelper.FocusBorderBrush="{StaticResource MahApps.Brushes.Accent}"
                  HorizontalContentAlignment="Left"
                  BorderBrush="{StaticResource ColorBorder}"
                  SelectedIndex="{Binding WeekDay.Month, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={converter:SelectedIndexMonth}}"
                  FontSize="14"
                  Margin="0 5 10 0">
          <ComboBoxItem Content="1월"/>
          <ComboBoxItem Content="2월"/>
          <ComboBoxItem Content="3월"/>
          <ComboBoxItem Content="4월"/>
          <ComboBoxItem Content="5월"/>
          <ComboBoxItem Content="6월"/>
          <ComboBoxItem Content="7월"/>
          <ComboBoxItem Content="8월"/>
          <ComboBoxItem Content="9월"/>
          <ComboBoxItem Content="10월"/>
          <ComboBoxItem Content="11월"/>
          <ComboBoxItem Content="12월"/>
          <ComboBoxItem Content="매월"/>
        </ComboBox>
      </Grid>
      <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0"
                Margin="10 5 0 0"
                Style="{StaticResource BorderHeader}">
          <TextBlock Text="지정주차"
                      Style="{StaticResource TextBlockHeader}"/>
        </Border>
        <ComboBox Grid.Column="1"
                  mah:ControlsHelper.CornerRadius="0 5 5 0"
                  mah:ControlsHelper.FocusBorderBrush="{StaticResource MahApps.Brushes.Accent}"
                  HorizontalContentAlignment="Left"
                  BorderBrush="{StaticResource ColorBorder}"
                  SelectedIndex="{Binding WeekDay.WeekOfMonth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={converter:SelectedIndexWeekNumber}}"
                  FontSize="14"
                  Margin="0 5 10 0">
          <ComboBoxItem Content="1주차"/>
          <ComboBoxItem Content="2주차"/>
          <ComboBoxItem Content="3주차"/>
          <ComboBoxItem Content="4주차"/>
          <ComboBoxItem Content="5주차"/>
          <ComboBoxItem Content="매주"/>
        </ComboBox>
      </Grid>
      <Grid Grid.Row="2">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="1*"/>
          <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Border Grid.Column="0"
                Margin="10 5 0 5"
                Style="{StaticResource BorderHeader}">
          <TextBlock Text="요일"
                      Style="{StaticResource TextBlockHeader}"/>
        </Border>
        <ComboBox Grid.Column="1"
                  mah:ControlsHelper.CornerRadius="0 5 5 0"
                  mah:ControlsHelper.FocusBorderBrush="{StaticResource MahApps.Brushes.Accent}"
                  HorizontalContentAlignment="Left"
                  BorderBrush="{StaticResource ColorBorder}"
                  SelectedIndex="{Binding WeekDay.WeekDay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={converter:SelectedIndexWeekDay}}"
                  FontSize="14"
                  Margin="0 5 10 5">
          <ComboBoxItem Content="월요일"/>
          <ComboBoxItem Content="화요일"/>
          <ComboBoxItem Content="수요일"/>
          <ComboBoxItem Content="목요일"/>
          <ComboBoxItem Content="금요일"/>
          <ComboBoxItem Content="토요일"/>
          <ComboBoxItem Content="일요일"/>
          <ComboBoxItem Content="매일"/>
        </ComboBox>
      </Grid>
    </Grid>
  </Grid>
</UserControl>
